{% extends "base.html" %}
{% block content %}

<link rel="stylesheet" href="{{ url_for('static', filename='css/advanced-features.css') }}">

<div class="container">
  <!-- Header -->
  <section class="card">
    <h1>âœ¨ Advanced Features</h1>
    <p>Explore powerful analytics, collaboration, visualization, and optimization tools</p>
  </section>

  <!-- Features Grid -->
  <div class="features-grid">
    <!-- Analytics & Insights -->
    <div class="feature-card" data-feature="analytics">
      <h3>ğŸ“Š Analytics & Insights</h3>
      <p>Predict COâ‚‚ levels, detect anomalies, and get smart insights about your data</p>
      <span class="status">âœ“ Active</span>
    </div>

    <!-- Visualizations -->
    <div class="feature-card" data-feature="visualizations">
      <h3>ğŸ“ˆ Visualizations</h3>
      <p>View heatmaps, correlation analysis, and customizable dashboards</p>
      <span class="status">âœ“ Active</span>
    </div>

    <!-- Collaboration -->
    <div class="feature-card" data-feature="collaboration">
      <h3>ğŸ”— Collaboration & Sharing</h3>
      <p>Create teams, share dashboards, and manage permissions</p>
      <span class="status">âœ“ Active</span>
    </div>

    <!-- Performance -->
    <div class="feature-card" data-feature="performance">
      <h3>âš™ï¸ Performance & Optimization</h3>
      <p>Monitor system performance, manage cache, and optimize data</p>
      <span class="status">âœ“ Active</span>
    </div>

    <!-- Health -->
    <div class="feature-card" data-feature="health">
      <h3>â¤ï¸ Health Recommendations</h3>
      <p>Get personalized health recommendations based on COâ‚‚ levels</p>
      <span class="status">âœ“ Active</span>
    </div>
  </div>

  <!-- Analytics Section -->
  <section id="analytics-section" class="content-section card">
    <h2>ğŸ“Š Analytics & Insights</h2>
    
    <div style="margin-bottom: 1.5rem;">
      <h3>COâ‚‚ Level Prediction</h3>
      <div id="analytics-predict" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <p style="color: var(--muted);">Loading prediction data...</p>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Anomalies Detected</h3>
      <div id="analytics-anomalies" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <p style="color: var(--muted);">Loading anomaly data...</p>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Smart Insights</h3>
      <div id="analytics-insights" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <p style="color: var(--muted);">Loading insights...</p>
      </div>
    </div>

    <button onclick="loadAnalytics()" class="btn-primary">Refresh Analytics</button>
  </section>

  <!-- Visualizations Section -->
  <section id="visualizations-section" class="content-section card">
    <h2>ğŸ“ˆ Visualizations</h2>
    
    <div style="margin-bottom: 1.5rem;">
      <h3>COâ‚‚ Heatmap (7 Days Ã— 24 Hours)</h3>
      <div id="viz-heatmap" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px; min-height: 300px;">
        <p style="color: var(--muted);">Loading heatmap...</p>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Correlation Analysis</h3>
      <div id="viz-correlation" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <p style="color: var(--muted);">Loading correlation data...</p>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Dashboard Configuration</h3>
      <div id="viz-config" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <p style="color: var(--muted);">Loading configuration...</p>
      </div>
    </div>

    <button onclick="loadVisualizations()" class="btn-primary">Refresh Visualizations</button>
  </section>

  <!-- Collaboration Section -->
  <section id="collaboration-section" class="content-section card">
    <h2>ğŸ”— Collaboration & Sharing</h2>
    
    <div style="margin-bottom: 1.5rem;">
      <h3>Create Team</h3>
      <div style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <input type="text" id="team-name" placeholder="Team name" style="padding: 0.5rem; margin-bottom: 0.5rem; width: 100%; border: 1px solid var(--border); border-radius: 4px; background: var(--card); color: var(--text);">
        <button onclick="createTeam()" class="btn-primary">Create Team</button>
        <div id="team-status" style="margin-top: 1rem;"></div>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Share Dashboard</h3>
      <div style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <input type="text" id="dashboard-name" placeholder="Dashboard name" style="padding: 0.5rem; margin-bottom: 0.5rem; width: 100%; border: 1px solid var(--border); border-radius: 4px; background: var(--card); color: var(--text);">
        <button onclick="shareDashboard()" class="btn-primary">Generate Share Link</button>
        <div id="share-status" style="margin-top: 1rem;"></div>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Share Link</h3>
      <div id="collab-links" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <p style="color: var(--muted);">No shared links yet. Create one above.</p>
      </div>
    </div>
  </section>

  <!-- Performance Section -->
  <section id="performance-section" class="content-section card">
    <h2>âš™ï¸ Performance & Optimization</h2>
    
    <div style="margin-bottom: 1.5rem;">
      <h3>System Performance</h3>
      <div id="perf-metrics" style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <p style="color: var(--muted);">Loading performance metrics...</p>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Cache Management</h3>
      <div style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <button onclick="clearCache()" class="btn-primary">Clear Cache</button>
        <div id="cache-status" style="margin-top: 1rem;"></div>
      </div>
    </div>

    <div style="margin-bottom: 1.5rem;">
      <h3>Data Management</h3>
      <div style="background: rgba(61, 217, 143, 0.05); padding: 1rem; border-radius: 8px;">
        <label for="archive-days">Archive data older than (days):</label>
        <input type="number" id="archive-days" value="365" min="1" style="padding: 0.5rem; margin: 0.5rem 0; width: 100px; border: 1px solid var(--border); border-radius: 4px; background: var(--card); color: var(--text);">
        <button onclick="archiveData()" class="btn-primary" style="margin-left: 0.5rem;">Archive Data</button>
        <div id="archive-status" style="margin-top: 1rem;"></div>
      </div>
    </div>

    <button onclick="loadPerformance()" class="btn-primary">Refresh Metrics</button>
  </section>

  <!-- Health Section -->
  <section id="health-section" class="content-section card">
    <h2>â¤ï¸ Health Recommendations</h2>
    
    <div style="margin-bottom: 1.5rem;">
      <div id="health-data" style="background: rgba(61, 217, 143, 0.05); padding: 1.5rem; border-radius: 8px;">
        <p style="color: var(--muted);">Loading health recommendations...</p>
      </div>
    </div>

    <button onclick="loadHealth()" class="btn-primary">Refresh Recommendations</button>
  </section>

</div>

{% endblock %}

{% block scripts %}
<script defer src="{{ url_for('static', filename='js/advanced-features.js') }}"></script>
{% endblock %}
