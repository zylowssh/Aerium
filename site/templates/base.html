<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Aerium - Surveillance intelligente de la qualitÃ© de l'air COâ‚‚ en temps rÃ©el" />
    <meta name="theme-color" content="#0b0d12" />
    <title>Aerium - QualitÃ© de l'air COâ‚‚</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
    <link
      rel="icon"
      href="{{ url_for('static', filename='images/favicon.ico') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/profile-admin.css') }}"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1"></script>
  </head>
  <body>
    <nav class="navbar">
      <div class="nav-left">
        <img
          src="{{ url_for('static', filename='images/logo-navbar.png') }}"
          alt="Aerium"
          class="nav-logo"
        />
      </div>

      <div class="nav-center">
        <a href="/">ğŸ  Vue d'ensemble</a>
        <a href="/live">ğŸ“Š Live</a>
        <a href="/settings">âš™ï¸ ParamÃ¨tres</a>
        <a href="/visualization">ğŸ“ˆ Visualisations</a>
        <a href="/features-hub">âœ¨ FonctionnalitÃ©s</a>
        {% if session.get('username') %}
        <a href="{{ url_for('onboarding_page') }}">ğŸ“– Guide</a>
        {% endif %}
        {% if session.get('username') and is_admin %}
        <a href="/simulator">ğŸ”¬ Simulateur</a>
        <a href="/admin-tools">ğŸ› ï¸ Admin</a>
        {% endif %}
        <span class="nav-underline"></span>
      </div>

      <div class="nav-right">
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" aria-label="Menu" aria-expanded="false">â˜°</button>
        <button id="theme-toggle-btn" class="theme-toggle" title="Basculer le thÃ¨me">
          <span class="theme-icon">ğŸŒ™</span>
        </button>
        <div class="nav-status" id="nav-analysis">
          <span class="dot"></span>
          <div class="nav-status-text">
            <span class="label" id="nav-analysis-label">Analyse active</span>
            <span class="sublabel" id="nav-transport-label">Live via WS</span>
          </div>
        </div>
        <div class="nav-mini" id="nav-mini">
          <span class="nav-mini-value" id="nav-ppm-value">â€” ppm</span>
          <canvas id="nav-ppm-spark" width="160" height="48" aria-label="Historique COâ‚‚"></canvas>
        </div>
        {% if session.get('username') %}
        <div class="nav-user">
          <a href="{{ url_for('profile') }}" class="nav-profile-link" title="Profil">ğŸ‘¤ {{ session.get('username') }}</a>
          <a href="{{ url_for('logout') }}" class="nav-logout" title="DÃ©connexion">ğŸšª</a>
        </div>
        {% endif %}
      </div>
    </nav>

    <!-- Mobile Navigation Menu -->
    <div class="mobile-menu">
      <a href="/">ğŸ  Vue d'ensemble</a>
      <a href="/live">ğŸ“Š Live</a>
      <a href="/settings">âš™ï¸ ParamÃ¨tres</a>
      <a href="/features-hub">âœ¨ Features</a>
      {% if session.get('username') %}
      <hr style="border: none; border-top: 1px solid rgba(255, 255, 255, 0.1); margin: 10px 0;">
      <a href="{{ url_for('onboarding_page') }}">ğŸ“– Guide</a>
      {% if is_admin %}
      <a href="/simulator">ğŸ”¬ Simulateur</a>
      <a href="/admin-tools">ğŸ› ï¸ Outils Admin</a>
      {% endif %}
      <a href="{{ url_for('profile') }}">ğŸ‘¤ Profil</a>
      <a href="{{ url_for('logout') }}">ğŸšª DÃ©connexion</a>
      {% else %}
      <a href="{{ url_for('login_page') }}">ğŸ” Se connecter</a>
      <a href="{{ url_for('register_page') }}">ğŸ“ S'inscrire</a>
      {% endif %}
    </div>

    <main class="container">{% block content %}{% endblock %}</main>
    {% block scripts %}{% endblock %}

    <!-- Module Loading Order (DO NOT CHANGE) -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script defer src="{{ url_for('static', filename='js/mobile.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/websocket.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/utils.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/settings.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/live.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/overview.js') }}"></script>
    <script defer src="{{ url_for('static', filename='js/main.js') }}"></script>
  </body>
</html>
