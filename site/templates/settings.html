{% extends "base.html" %} {% block content %}

<section class="card">
  <h2>Apparence</h2>

  <div class="switch-row">
    <span class="switch-label">Mode clair</span>
    <label class="toggle">
      <input type="checkbox" id="toggle-light-mode" />
      <span class="track">
        <span class="thumb"></span>
      </span>
    </label>
  </div>

  <p class="hint" id="theme-hint">Actuellement: Mode sombre</p>

  <div class="switch-row">
    <span class="switch-label">Alertes audio</span>
    <label class="toggle">
      <input type="checkbox" id="toggle-audio-alerts" checked />
      <span class="track">
        <span class="thumb"></span>
      </span>
    </label>
  </div>

  <p class="hint">Son lors du dÃ©passement des seuils</p>
</section>

<section class="card">

  <div class="switch-row" style="margin-bottom: 0;">
    <span class="switch-label">Analyse en direct</span>
    <label class="toggle">
      <input type="checkbox" id="toggle-analysis" checked />
      <span class="track">
        <span class="thumb"></span>
      </span>
    </label>
  </div>

  <p id="status-text" class="status-text" style="margin-top: 12px; color: var(--muted); font-size: 0.9rem;"></p>
</section>

<section class="card">
  <h2>Seuils d'alerte</h2>

  <div class="threshold-presets" style="margin-bottom: 16px;">
    <p style="font-size: 0.85rem; color: var(--muted); margin-bottom: 8px;">PrÃ©sets rapides</p>
    <div style="display: flex; gap: 8px; flex-wrap: wrap;">
      <button class="preset-btn" data-preset="office">ğŸ¢ Bureau</button>
      <button class="preset-btn" data-preset="school">ğŸ“ Ã‰cole</button>
      <button class="preset-btn" data-preset="strict">ğŸ”’ Strict</button>
    </div>
  </div>

  <div class="slider-group">
    <div class="slider-item">
      <label for="good-threshold" class="slider-label">Seuil Bon â†’ Moyen</label>
      <input
        type="range"
        id="good-threshold"
        min="0"
        max="2000"
        step="1"
        value="800"
      />
      <div class="slider-values">
        <span>400</span>
        <span id="good-value" class="slider-current">800 ppm</span>
        <span>2000</span>
      </div>
    </div>

    <div class="slider-item">
      <label for="bad-threshold" class="slider-label"
        >Seuil Moyen â†’ Mauvais</label
      >
      <input
        type="range"
        id="bad-threshold"
        min="0"
        max="2000"
        step="1"
        value="1200"
      />
      <div class="slider-values">
        <span>400</span>
        <span id="bad-value" class="slider-current">1200 ppm</span>
        <span>2000</span>
      </div>
    </div>
  </div>

  <div class="threshold-visual">
    <p style="font-size: 0.8rem; color: var(--muted); margin-bottom: 10px;">RÃ©partition des zones</p>
    <div class="threshold-bar">
      <div id="good-segment" class="threshold-segment good-seg">Bon</div>
      <div id="medium-segment" class="threshold-segment medium-seg">Moyen</div>
      <div id="bad-segment" class="threshold-segment bad-seg">Mauvais</div>
    </div>
    <div class="threshold-labels">
      <span class="label min">400</span>
      <span class="label good" id="good-label">800</span>
      <span class="label bad" id="bad-label">1200</span>
      <span class="label max">2000</span>
    </div>
  </div>
</section>

<section class="card">
  <h2>Simulation</h2>

  <div class="switch-row">
    <span class="switch-label">Mode rÃ©aliste</span>
    <label class="toggle">
      <input type="checkbox" id="realistic-mode" checked />
      <span class="track">
        <span class="thumb"></span>
      </span>
    </label>
  </div>

  <p class="hint">Simule des variations naturelles du COâ‚‚</p>

  <div class="slider-item">
    <label for="update-speed" class="slider-label"
      >Vitesse de mise Ã  jour (Live)</label
    >
    <input
      type="range"
      id="update-speed"
      min="1"
      max="10"
      value="1"
      step="0.5"
    />
    <div class="slider-values">
      <span>1s</span>
      <span id="speed-value" class="slider-current">1 seconde</span>
      <span>10s</span>
    </div>
  </div>

  <div class="slider-item">
    <label for="overview-update-speed" class="slider-label"
      >Vitesse de mise Ã  jour (Vue d'ensemble)</label
    >
    <input
      type="range"
      id="overview-update-speed"
      min="2"
      max="30"
      value="5"
      step="1"
    />
    <div class="slider-values">
      <span>2s</span>
      <span id="overview-speed-value" class="slider-current">5 secondes</span>
      <span>30s</span>
    </div>
  </div>
</section>

<section class="card">
  <h2>RÃ©tention des donnÃ©es</h2>

  <div class="slider-item">
    <label for="retention-days" class="slider-label">Conserver les donnÃ©es</label>
    <input
      type="range"
      id="retention-days"
      min="7"
      max="365"
      value="90"
      step="1"
    />
    <div class="slider-values">
      <span>7j</span>
      <span id="retention-value" class="slider-current">90 jours</span>
      <span>365j</span>
    </div>
    <p class="hint" id="retention-hint" style="margin-top: 8px;">Environ â€” lignes</p>
  </div>

  <button id="cleanup-btn" class="link" style="background: rgba(248,113,113,0.15); color: #f87171; border: 1px solid rgba(248,113,113,0.4); margin-top: 12px;">ğŸ—‘ï¸ Nettoyer maintenant</button>
</section>

<div class="action-buttons">
  <button id="save-settings" class="btn-save">ğŸ’¾ Enregistrer</button>
  <button id="reset-settings" class="btn-reset">âŸ² RÃ©initialiser</button>
  <a href="/live" class="link" style="text-align: center;">â† Retour au tableau de bord</a>
</div>

<div id="toast-container" style="position: fixed; bottom: 20px; right: 20px; z-index: 9999; display: none;">
  <div id="toast" style="background: #4ade80; color: #0b0d12; padding: 12px 16px; border-radius: 8px; font-weight: 600; min-width: 200px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,0.4);"></div>
</div>

{% endblock %}